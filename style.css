/* === THEME TOKENS ========================================================= */
:root{
  --bg:#0a0f1e;              /* фон */
  --bg-grad: radial-gradient(1200px 800px at 80% -10%, rgba(99,102,241,.16) 0, var(--bg) 60%);
  --card:#0f172a;            /* карточки */
  --surface:#0b1220;         /* поверхностный слой (панели/инпуты) */
  --line:#1f2937;            /* границы */
  --muted:#9aa4b2;           /* вторичный текст */
  --text:#e5e7eb;            /* основной текст */
  --accent:#60a5fa;          /* акцент (градиент старт) */
  --accent2:#22c55e;         /* акцент (градиент конец) */
  --chip:#0b1325;            /* чипы/бейджи */
  --chip2:#0d162a;           /* инпуты/кнопки фон */
  --ok:#10b981;              /* успех */
  --warn:#f59e0b;            /* предупреждение */
  --err:#ef4444;             /* ошибка */
  --shadow: 0 6px 18px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.02);
}

:root[data-theme="light"]{
  --bg:#f7fafc;
  --bg-grad: radial-gradient(1200px 800px at 80% -10%, rgba(96,165,250,.16) 0, var(--bg) 60%);
  --card:#ffffff;
  --surface:#f1f5f9;
  --line:#e2e8f0;
  --muted:#4b5563;
  --text:#0f172a;
  --accent:#2563eb;
  --accent2:#10b981;
  --chip:#eef2ff;
  --chip2:#edf2f7;
  --shadow: 0 6px 18px rgba(2,6,23,.08), inset 0 1px 0 rgba(255,255,255,.8);
}

/* === RESET / BASE ========================================================= */
*{box-sizing:border-box}
html,body{margin:0;padding:0;min-height:100%}
body{
  background:var(--bg-grad);
  color:var(--text);
  font:16px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial;
}

/* Текст всегда из переменной темы */
h1,h2,h3,h4,h5,h6,p,small,strong,em,span,div,li,label{color:var(--text)}
a{color:var(--accent);text-decoration:none}
a:hover{text-decoration:underline}

/* Формы — принудительно под тему */
input,select,textarea,button,option{
  color:var(--text);
  background:var(--chip2);
  border:1px solid var(--line);
}
::placeholder{color:var(--muted)}
:focus-visible{outline:2px solid var(--accent);outline-offset:2px}

/* === APP BAR ============================================================== */
.appbar{
  position:sticky;top:0;z-index:30;
  padding:10px 12px;border-bottom:1px solid var(--line);
  display:flex;align-items:center;gap:10px;justify-content:space-between;
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.00));
  backdrop-filter:blur(8px) saturate(140%);
}
.title{font-size:18px;font-weight:800;letter-spacing:.2px}
.container{padding:12px;display:grid;grid-template-columns: 1fr;gap:12px;max-width:1100px;margin:0 auto}

/* === CONTROLS ============================================================= */
.iconbtn,.btn,.select,.input{
  padding:10px 12px;border:1px solid var(--line);border-radius:12px;
  background:var(--chip2);color:var(--text);transition:transform .05s ease, box-shadow .15s ease;
}
.iconbtn{width:40px;height:40px;display:grid;place-items:center;cursor:pointer}
.iconbtn:hover,.btn:hover{transform:translateY(-1px);box-shadow:var(--shadow)}
.btn{cursor:pointer}
.btn.wide{width:100%}
.select,.input{min-width:200px}
textarea.input{min-height:84px}

/* Cтатусные кнопки */
.status .btn.ok{background:rgba(16,185,129,.15);border-color:rgba(16,185,129,.35)}
.status .btn.no{background:rgba(239,68,68,.12);border-color:rgba(239,68,68,.35)}
.status .btn.ok:hover{background:rgba(16,185,129,.22)}
.status .btn.no:hover{background:rgba(239,68,68,.2)}

/* === BADGES / CHIPS ====================================================== */
.badge{
  padding:4px 8px;border-radius:999px;background:var(--chip);
  border:1px solid var(--line);color:var(--muted);font-size:12px
}

/* === DRAWER (левая панель) ============================================== */
.drawer{
  position:fixed;inset:0 30% 0 0;max-width:360px;background:var(--card);
  border-right:1px solid var(--line);padding:12px;transform:translateX(-110%);
  transition:transform .2s ease;z-index:40;box-shadow:var(--shadow)
}
.drawer.open{transform:none}
.drawer-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.backdrop{position:fixed;inset:0;backdrop-filter:blur(2px);background:rgba(0,0,0,.25);
  opacity:0;pointer-events:none;transition:opacity .2s ease;z-index:35}
.backdrop.show{opacity:1;pointer-events:auto}

/* === TABS ================================================================ */
.tabs{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 12px}
.tab{
  padding:8px 12px;border:1px solid var(--line);border-radius:999px;background:var(--surface);
  cursor:pointer;color:var(--text);box-shadow:inset 0 1px 0 rgba(255,255,255,.04)
}
.tab:hover{box-shadow:var(--shadow)}
.tab.active{
  background:linear-gradient(90deg, var(--accent), var(--accent2));
  color:white;border-color:transparent;box-shadow:0 6px 18px rgba(37,99,235,.35)
}

/* === PANELS / CARDS ====================================================== */
.panel{
  border:1px solid var(--line);border-radius:16px;background:var(--card);padding:12px;margin-bottom:12px;
  box-shadow:var(--shadow)
}
.panel-title{font-weight:800;margin-bottom:8px}
.row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.divider{height:1px;background:var(--line);margin:10px 0}
.hint{color:var(--muted);font-size:12px}

/* === KPIs ================================================================ */
.kpis{display:flex;gap:8px;align-items:center;flex-wrap:wrap}

/* === WEEK / TASK CARDS =================================================== */
.week{
  border:1px solid var(--line);border-radius:16px;overflow:hidden;background:var(--card);
  box-shadow:var(--shadow)
}
.week header{
  display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--line)
}
.week header h2{margin:0;font-size:16px}

/* Прогресс — читаемый в обеих темах */
.progress{height:8px;border-radius:6px;background:rgba(255,255,255,.06);overflow:hidden}
:root[data-theme="light"] .progress{background:#e8edf6}
.bar{height:100%;background:linear-gradient(90deg,var(--accent),var(--accent2));width:0%}

.task{border-top:1px solid var(--line);padding:10px 12px}
.summary{
  display:grid;grid-template-columns:110px 1fr 180px 220px;gap:10px;align-items:center
}
.summary strong{font-weight:800}
.descr{white-space:pre-wrap;color:var(--muted);font-size:14px;margin:8px 0 0}
.status{display:flex;gap:6px;justify-content:flex-end}

/* === RESPONSIVE ========================================================== */
@media (max-width: 980px){
  .summary{grid-template-columns: 90px 1fr 160px 200px}
}
@media (max-width: 820px){
  .summary{grid-template-columns: 80px 1fr 140px 160px}
  .title{font-size:16px}
  .drawer{inset:0 20% 0 0;max-width:86vw}
}
@media (max-width: 560px){
  .summary{grid-template-columns: 80px 1fr}
  .status{grid-column: 1/3; justify-content:flex-start}
  .container{padding:10px}
  .select,.input{min-width:unset;width:100%}
}
@media (max-width: 420px){
  .container{padding:8px}
  .iconbtn{width:38px;height:38px}
}

/* === EXTRAS: сольём любые «чёрные» дефолтные места ====================== */
button, input, select, textarea { color: var(--text) !important; }
option { background: var(--chip2); color: var(--text); }
